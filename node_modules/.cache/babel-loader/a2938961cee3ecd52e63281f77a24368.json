{"ast":null,"code":"var _jsxFileName = \"/Users/tiffany/culture-scheduler/CultureClient/culture-client/src/components/Account.js\";\nimport React, { Component } from 'react';\nimport LoginForm from './LoginForm';\nimport SignupForm from './SignupForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Account extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handle_login = (e, data) => {\n      e.preventDefault();\n      fetch('http://localhost:8000/token-auth/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(res => res.json()).then(json => {\n        localStorage.setItem('token', json.token);\n        this.setState({\n          logged_in: true,\n          displayed_form: '',\n          username: json.user.username\n        });\n      });\n    };\n\n    this.handle_signup = (e, data) => {\n      e.preventDefault();\n      fetch('http://localhost:8000/user/users/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(res => res.json()).then(json => {\n        localStorage.setItem('token', json.token);\n        this.setState({\n          logged_in: true,\n          displayed_form: '',\n          username: json.username\n        });\n      });\n    };\n\n    this.handle_logout = () => {\n      localStorage.removeItem('token');\n      this.setState({\n        logged_in: false,\n        username: ''\n      });\n    };\n\n    this.display_form = form => {\n      this.setState({\n        displayed_form: form\n      });\n    };\n\n    this.state = {\n      displayed_form: 'signup',\n      logged_in: localStorage.getItem('token') ? true : false,\n      username: '',\n      data: {}\n    };\n  }\n\n  componentDidMount() {\n    if (this.state.logged_in) {\n      fetch('http://localhost:8000/user/current_user/', {\n        headers: {\n          Authorization: `JWT ${localStorage.getItem('token')}`\n        }\n      }).then(res => res.json()).then(json => {\n        this.setState({\n          username: json.username\n        });\n      });\n    }\n  }\n\n  render() {\n    let form;\n\n    switch (this.state.displayed_form) {\n      case 'login':\n        form = /*#__PURE__*/_jsxDEV(LoginForm, {\n          handle_login: this.handle_login\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 12\n        }, this);\n        break;\n\n      case 'signup':\n        form = /*#__PURE__*/_jsxDEV(SignupForm, {\n          handle_signup: this.handle_signup\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 12\n        }, this);\n        break;\n\n      default:\n        form = null;\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [form, /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: this.state.logged_in ? `Hello, ${this.state.username}` : 'Please Log In'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default Account;","map":{"version":3,"sources":["/Users/tiffany/culture-scheduler/CultureClient/culture-client/src/components/Account.js"],"names":["React","Component","LoginForm","SignupForm","Account","constructor","props","handle_login","e","data","preventDefault","fetch","method","headers","body","JSON","stringify","then","res","json","localStorage","setItem","token","setState","logged_in","displayed_form","username","user","handle_signup","handle_logout","removeItem","display_form","form","state","getItem","componentDidMount","Authorization","render"],"mappings":"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","sourcesContent":["\nimport React, { Component } from 'react';\nimport LoginForm from './LoginForm';\nimport SignupForm from './SignupForm';\n\nclass Account extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdisplayed_form: 'signup',\n\t\t\tlogged_in: localStorage.getItem('token') ? true : false,\n\t\t\tusername: '',\n\t\t\tdata: {}\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.state.logged_in) {\n\t\t\tfetch('http://localhost:8000/user/current_user/', {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `JWT ${localStorage.getItem('token')}`\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.then(res => res.json())\n\t\t\t\t.then(json => {\n\t\t\t\t\tthis.setState({ username: json.username });\n\t\t\t\t});\n\t\t}\n\t}\n\n\thandle_login = (e, data) => {\n\t\te.preventDefault();\n\t\tfetch('http://localhost:8000/token-auth/', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify(data)\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(json => {\n\t\t\t\tlocalStorage.setItem('token', json.token);\n\t\t\t\tthis.setState({\n\t\t\t\t\tlogged_in: true,\n\t\t\t\t\tdisplayed_form: '',\n\t\t\t\t\tusername: json.user.username\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\thandle_signup = (e, data) => {\n\t\te.preventDefault();\n\t\tfetch('http://localhost:8000/user/users/', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify(data)\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(json => {\n\t\t\t\tlocalStorage.setItem('token', json.token);\n\t\t\t\tthis.setState({\n\t\t\t\t\tlogged_in: true,\n\t\t\t\t\tdisplayed_form: '',\n\t\t\t\t\tusername: json.username\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\thandle_logout = () => {\n\t\tlocalStorage.removeItem('token');\n\t\tthis.setState({ logged_in: false, username: '' });\n\t};\n\n\tdisplay_form = form => {\n\t\tthis.setState({\n\t\t\tdisplayed_form: form\n\t\t});\n\t};\n\n\trender() {\n\t\tlet form;\n\t\tswitch (this.state.displayed_form) {\n\t\t\tcase 'login':\n\t\t\t\tform = <LoginForm handle_login={this.handle_login} />;\n\t\t\t\tbreak;\n\t\t\tcase 'signup':\n\t\t\t\tform = <SignupForm handle_signup={this.handle_signup} />;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tform = null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"App\">\n\t\t\t\t{form}\n\t\t\t\t<h3>\n\t\t\t\t\t{this.state.logged_in\n\t\t\t\t\t\t? `Hello, ${this.state.username}`\n\t\t\t\t\t\t: 'Please Log In'}\n\t\t\t\t</h3>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Account;"]},"metadata":{},"sourceType":"module"}